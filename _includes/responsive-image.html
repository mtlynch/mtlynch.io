{% comment %}
<!--
  Responsive Image Include

  This partial is used with the responsive image plugin.  In the _config file,
  this template is used as the default for responsive images to configure a
  srcset value for images to ensure the best option for an image is used for a
  specific user's browser.

  @param {string} "path" - Required. Path to image file relative to the root.
  @param {string} "alt" - Required. Alt attribute for image tag.
  @param {boolean} "img_link" - Optional, default is false. If img should have
    the image overlay functionality that the theme provides.
  @param {string} "fig_caption" - Optional. Caption to be used with figure tag.
  @param {string} "media_rendition" - Required.  The title for the array of 
    media queries to include for the "sizes" attribute on image tag that is 
    listed in the global _config file. Currently, the only possible value is: 
    "article", however, other arrays of sizes could be added in the future.

-->
{% endcomment %}

{% comment %}
<!-- determine all image options for srcset -->
{% endcomment %}
{% capture srcset %}
    {% for i in resized %}
        {{ site.url }}/{{ i.path }} {{ i.width }}w,
    {% endfor %}
     {{ site.url }}/{{ original.path }} {{ original.width }}w
{% endcapture %}

{% comment %}
<!-- determine sizes configurations for image -->
{% endcomment %}
{% assign rendition = site.media_renditions.[media_rendition] %}
{% if rendition != nil %}
  {% assign sizes = rendition.sizes | join: ', ' %}
{%endif%}

{% if fig_caption %}
<figure>
{% endif %}

{% if img_link %}
  <a href="{{ site.url }}/{{ original.path }}">
    <img src="/{{ path }}" alt="{{ alt }}" srcset="{{ srcset | strip_newlines }}" sizes="{{ sizes }}" class="{{ class }}">
  </a>
{% else %}
  <img src="/{{ path }}" alt="{{ alt }}" srcset="{{ srcset | strip_newlines }}" sizes="{{ sizes }}" class="{{ class }}">
{% endif %}

{% if fig_caption %}
  <figcaption>{{ fig_caption }}</figcaption>
{% endif %}

{% if fig_caption %}
</figure>
{% endif %}